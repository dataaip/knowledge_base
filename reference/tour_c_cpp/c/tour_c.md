# C 参考手册

- [C 参考手册](#c-参考手册)
  - [语言标准](#语言标准)
  - [编译器支持](#编译器支持)
  - [语言概念](#语言概念)
  - [标准库头文件](#标准库头文件)
  - [功能测试](#功能测试)
  - [技术规格](#技术规格)
  - [有用资源](#有用资源)

## 语言标准

**C89/C90**：是由美国国家标准协会（ANSI）于 1989 年发布的第一个正式 C 语言标准，随后 ISO 在 1990 年采纳并发布为 ISO/IEC 9899:1990，因此也称为 C90。该标准奠定了现代 C 语言的基础，包括基本语法、数据类型、控制结构等。

**C95**： 是对 C90 的一次小幅修订，主要增加了对宽字符（wide character）的支持，并修复了一些小错误。它并未引入新的语言特性，而是增强了国际化支持。

**C99**： 是 C 语言发展中的一个重要里程碑，引入了许多新特性，如：混合声明与代码（允许在代码块中任意位置声明变量）、新的数据类型（如 `_Bool`、`long long`）、复数类型（`_Complex`）、可变长度数组（VLA）、内联函数（`inline`）、单行注释（`//`）

**C11**： 引入了多线程支持、泛型选择（`_Generic`）、静态断言（`_Static_assert`）、匿名结构体/联合体等新特性，进一步增强了语言的功能性和安全性。

**C17**： 是对 C11 的一次维护性修订，主要目的是修复已知缺陷，未引入重大新特性。它是目前广泛使用的标准之一。

**C23**： 是当前最新的 C 语言标准，仍在发展中，预计将引入更多现代化特性，如改进的泛型支持、更好的错误处理机制等。

---

## 编译器支持

**GCC** 是一个开源的编译器套件，支持多种编程语言，包括 C 和 C++。它对 C 标准的支持非常全面，尤其是对 C99 和 C11 的支持较为成熟。GCC 还提供了许多扩展功能，如内联汇编、属性声明等。

**Clang** 是 LLVM 项目的一部分，以其快速编译速度和优秀的错误提示而闻名。它对 C 标准的支持也非常出色，尤其是在 C11 和 C17 方面表现优异。Clang 的设计目标是替代 GCC，成为下一代主流编译器。

**MSVC** 是微软开发的 C/C++ 编译器，主要用于 Windows 平台。虽然它对 C99 的支持相对较晚，但在 C11 和 C17 方面已经逐步完善。MSVC 提供了丰富的调试工具和集成开发环境（IDE），适合 Windows 开发者使用。

---

## 语言概念

**基础概念**：C 语言的基础概念包括注释（ /* */ 和 // ）、ASCII 编码（字符表示标准）、字符集（基本/扩展字符集）、翻译阶段（源码到可执行文件的9个处理步骤）、标点符号（语法分隔符）、标识符（变量/函数命名规则）、作用域（标识符可见性范围）、生存期（对象存在时间）、查找与命名空间（标识符解析规则）、类型（数据分类）、算术类型（整数和浮点类型）、对象与对齐（内存分配和地址约束）、main() 函数（程序入口点）、as-if 规则（编译器优化原则）、未定义行为（标准未定义的操作后果）、内存模型与数据竞争（多线程内存访问规范）。

**关键字**：C 语言关键字包含标准关键字（如 if/while ）、C99 新增关键字（如_Bool/_Complex）、C11 新增关键字（如_Generic/_Noreturn）、C23 新增关键字（如 constexpr/true/false ），以及条件支持关键字 asm（内联汇编）和 fortran（ Fortran 接口）。

**预处理器**：预处理器提供条件编译指令（ #if/#ifdef ）、宏定义指令（ #define/#undef ）、文件包含指令（ #include ）、错误控制指令（ #error/#warning ）和其他控制指令（ #pragma/#line ）。

**语句**：C 语言语句包含标签语句（ goto 标签）、表达式语句（赋值/函数调用）、复合语句（ {} 代码块）、选择语句（ if/switch ）、迭代语句（ for/while/do-while ）和跳转语句（ break/continue/return/goto ）。

**表达式**：表达式涵盖通用概念（左值/右值）、常量和字面量（ 123/3.14/'a' ）、运算符（算术/关系/逻辑/位操作）、转换（隐式/显式类型转换）、主表达式（标识符/字面量）和特殊表达式（ sizeof /复合字面量）。

**声明**：声明涉及类型说明符（ int/double 等）、存储类说明符（ extern/static/register/auto/_Thread_local ）、类型限定符（ const/volatile/restrict/_Atomic ）、对齐说明符（ _Alignas ）、初始值设定项（ = 初始化值）、属性声明列表（ C23 的 [[attr]] ）、声明定义重声明规则和声明符（变量名/指针/数组/函数声明符）。

**初始化**：初始化包括显示初始化（ = 明确赋值）、隐式初始化（默认值）、空初始化（未显式初始化）、标量初始化（基本类型初始化）、数组初始化（列表初始化）、结构体/联合体初始化（字段初始化）。

**函数**：函数包含函数声明（原型）、函数定义（实现）、可变参数（ va_list 机制）、内联函数（ inline 优化）和 _Noreturn 函数（不返回函数）。

**杂项和习语**：C 语言杂项包括 C 的历史（ K&R C、ANSI C、C99、C11、C23 标准演进）、一致性（实现符合标准的程度）、内联汇编（平台相关汇编代码嵌入）、信号处理（ <signal.h> 异步事件处理）和可分析性（代码静态分析特性）。

---

## 标准库头文件

**语言支持库**：提供基本类型定义（如`size_t`、`ptrdiff_t`）、附加基本类型和便利宏（如`offsetof`）、固定宽度整数类型（ C99 起的`int32_t`等）、数值限制（如`INT_MAX`）。

**通用实用程序库**：包含程序终止函数（`exit`、`abort`）、不可达控制流标记（`unreachable`）、与环境通信（`system`、`getenv`）、内存对齐查询（`alignof`）、信号处理（`signal`、`raise`）、非局部跳转（`setjmp`/`longjmp`）。

**诊断库**：提供错误码机制（`errno`、`perror`）、断言机制（`assert`）、边界检查函数（ C11 的边界检查接口）。

**内存管理库**：包含内存管理函数（`malloc`、`free`、`calloc`、`realloc`）。

**字符串库**：提供字节字符串处理（`strlen`、`strcpy`）、多字节字符串（`mblen`、`wctomb`）、宽字符串（`wcslen`、`wcscpy`）。

**日期和时间库**：包含时间操作（`time`、`clock`）、格式转换（`strftime`、`gmtime`）、常量定义（`CLOCKS_PER_SEC`）、类型定义（`struct tm`）。

**本地化库**：提供本地化支持函数（`setlocale`）、区域设置类别（`LC_ALL`等）。

**输入/输出库**：包含核心类型与对象（`FILE`）、标准流对象（`stdin`/`stdout`/`stderr`）、关键结构体与类型、宏常量（`EOF`、`BUFSIZ`）、文件操作函数（`fopen`、`fread`、`fwrite`）。

**算法库**：提供排序（`qsort`）、查找（`bsearch`）函数。

**数字库**：提供常用数学函数（`sin`、`sqrt`）、浮点环境（`fenv.h`）、伪随机数生成（`rand`、`srand`）、复数运算（`complex.h`）、泛型数学宏（`tgmath.h`）、位操作支持（位操作函数）、安全整数运算（`stdckdint.h`）。

**并发支持库**：包含线程管理（ C11 的`threads.h`）、原子操作（`stdatomic.h`）、原子标志、内存排序、互斥量、条件变量、线程局部存储。

---

## 功能测试

**功能测试宏标头**：用于检测编译器是否支持某些特定的功能或特性。常见的功能测试宏包括 `__STDC_VERSION__`用于检测 C 标准版本，如 `199901L` 表示 C99，`201112L` 表示 C11。`__STDC_HOSTED__` 用于检测是否为宿主环境（即是否支持完整的标准库）。`__STDC_UTF_16__` 用于检测是否支持 UTF-16 编码。`__STDC_UTF_32__` 用于检测是否支持 UTF-32 编码。`__STDC_IEC_559__`  用于检测是否支持 IEEE 754 浮点标准。`__STDC_IEC_559_COMPLEX__` 用于检测是否支持复数运算。`__STDC_NO_ATOMICS__` 用于检测是否不支持原子操作。`__STDC_NO_COMPLEX__` 用于检测是否不支持复数类型。`__STDC_NO_THREADS__` 用于检测是否不支持线程。`__STDC_NO_VLA__` 用于检测是否不支持可变长度数组。

---

## 技术规格

**实验性-功能标准库扩展（库基础 TS）**：嵌入式处理器的扩展针对嵌入式系统的特殊需求，提供了一些优化的库函数和数据类型，如更小的内存占用、更快的执行速度等。动态内存扩展提供了更灵活的动态内存管理功能，如智能指针、垃圾回收等。浮点扩展提供了更强大的浮点运算支持，如高精度浮点数、复数运算等。TR/TS 规格 TR（Technical Report）和 TS（Technical Specification）是 ISO 发布的技术报告和技术规范，用于描述实验性的或尚未正式纳入标准的功能。非 TS 提案 一些尚未被正式纳入标准但正在讨论中的提案，如新的库函数、语言特性等。

---

## 有用资源

**C 常见问题**：C FAQ 是一个关于 C 语言常见问题的问答集合，涵盖了语法、库函数、编译器、调试等方面的内容。它是学习 C 语言的重要参考资料。

**C 语言和库参考**：JTC1/SC22/WG14 是 ISO 的 C 语言标准化工作组，负责制定和维护 C 语言标准。comp.std.c 是一个 Usenet 新闻组，专门讨论 C 语言标准和相关问题。GNU C 手册：GNU C 手册是 GNU 项目的官方文档，详细介绍了 GNU C 编译器的特性和用法。

**C ABI**：System V ABI 是 Unix 系统的标准应用程序二进制接口，定义了程序如何与操作系统交互。Windows x64 ABI 是 Windows 64 位系统的应用程序二进制接口，定义了程序如何与 Windows 操作系统交互。PowerPC EABI 是 PowerPC 架构的嵌入式应用程序二进制接口，适用于嵌入式系统。ARM ABI 是 ARM 架构的应用程序二进制接口，适用于 ARM 处理器。

**相关标准**：POSIX.1-2024/IEEE 标准 1003.1-2024 是 Portable Operating System Interface 的缩写，定义了操作系统应该提供的接口和服务。POSIX.1-2024 是最新的 POSIX 标准，适用于 Unix 和类 Unix 系统。Linux 手册页是 Linux 系统的官方文档，详细介绍了系统调用、库函数、配置文件等内容。

**开源实现**：标准库实现 GNU libc 是 GNU 项目的标准库实现，广泛用于 Linux 系统。MUSL 是一个轻量级的标准库实现，适用于嵌入式系统。编译器 GCC 和 LLVM 是两个主流的开源编译器，支持多种编程语言，包括 C 和 C++。

**非 ANSI/ISO C库列表**：包管理器用于管理和安装第三方库，如 `apt`、`yum`、`brew` 等。开源库是指公开源代码的库，如 `glibc`、`musl`、`libcurl` 等。

---

来源：[cppreference.com](https://en.cppreference.com/index.html)