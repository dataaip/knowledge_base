# C 语言字符集与编码详解

  [1. 基本字符集（Basic Character Set）](#1-基本字符集basic-character-set)
  
  [2. 基本执行字符集（Basic Execution Character Set）](#2-基本执行字符集basic-execution-character-set)
  
  [3. 字面量编码（Literal Encoding）](#3-字面量编码literal-encoding)
  
  [4. 宽字符与多字节编码](#4-宽字符与多字节编码)
  
  [5. 实践举例](#5-实践举例)
  
  [6. 参考资料](#6-参考资料)

## 1. 基本字符集（Basic Character Set）

基本字符集是 C 语言源代码必须支持的最小字符集合，包含 95 个可打印字符和若干控制字符。

| 代码点   | 字符 | 字形/说明 |
|----------|------|-----------|
| U+0009   | \t   | 制表符（Tab）|
| U+000B   | \v   | 垂直制表符（Vertical Tab）|
| U+000C   | \f   | 换页符（Form Feed, FF）|
| U+0020   |      | 空格 |
| U+0021   | !    | 感叹号 |
| U+0022   | "    | 双引号 |
| U+0023   | #    | 井号 |
| U+0025   | %    | 百分号 |
| U+0026   | &    | 和号 |
| U+0027   | '    | 单引号 |
| U+0028   | (    | 左括号 |
| U+0029   | )    | 右括号 |
| U+002A   | *    | 星号 |
| U+002B   | +    | 加号 |
| U+002C   | ,    | 逗号 |
| U+002D   | -    | 减号/连字符 |
| U+002E   | .    | 句号 |
| U+002F   | /    | 斜杠 |
| U+0030..U+0039 | 0..9 | 数字 0~9 |
| U+003A   | :    | 冒号 |
| U+003B   | ;    | 分号 |
| U+003C   | <    | 小于号 |
| U+003D   | =    | 等号 |
| U+003E   | >    | 大于号 |
| U+003F   | ?    | 问号 |
| U+0041..U+005A | A..Z | 大写字母 |
| U+005B   | [    | 左方括号 |
| U+005C   | \\   | 反斜杠 |
| U+005D   | ]    | 右方括号 |
| U+005E   | ^    | 脱字符 |
| U+005F   | _    | 下划线 |
| U+0061..U+007A | a..z | 小写字母 |
| U+007B   | {    | 左花括号 |
| U+007C   | |    | 竖线 |
| U+007D   | }    | 右花括号 |
| U+007E   | ~    | 波浪号 |

> **注意**：与 C++ 不同，U+000A 换行符（LF）不在 C 的基本字符集中。C 要求每行文本以某种方式标示行结束，文档会将其视为单独的换行符。

---

## 2. 基本执行字符集（Basic Execution Character Set）

基本执行字符集包含基本字符集的所有成员，以及以下常用控制字符：

| 代码点 | 字符 | 说明 |
|--------|------|------|
| U+0000 | \0   | 空字符（字符串结束）|
| U+0007 | \a   | 响铃 |
| U+0008 | \b   | 退格 |
| U+000A | \n   | 换行（Line Feed）|
| U+000D | \r   | 回车（Carriage Return）|

每个成员的值应为非负且唯一。0 之后的每个字符的值应比前一个大 1，U+0000 的值为 0。每个成员的表示应适合于一个字节。

在 C++ 中，基本执行字符集也称为基本字面量字符集和基本执行宽字符集。

---

## 3. 字面量编码（Literal Encoding）

字面量编码是将执行字符集中的字符映射到字符常量或字符串字面量的实现定义过程（无编码前缀）。它支持所有基本执行字符集的值映射到实现定义的编码，可能包含多字节字符序列。

### 3.1 特殊字符

以下字符不在基本执行字符集，但在普通字符常量或字符串字面量中必须作为单字节编码：

| 代码点 | 字符 | 说明 |
|--------|------|------|
| U+0024 | $    | 美元符号 |
| U+0040 | @    | 商业 at |
| U+0060 | `    | 反引号 |

---

## 4. 宽字符与多字节编码

### 4.1 宽字符字面量编码

宽字符字面量编码是将执行字符集中的字符映射到以 L 为前缀的字符常量或字符串字面量的实现定义过程。若实现未定义 `__STDC_MB_MIGHT_NEQ_WC__`，则宽字符字面量编码与普通字面量编码一致。

### 4.2 UTF-8/UTF-16/UTF-32 字面量编码

- `u8` 前缀：UTF-8 编码（C11 起）
- `u` 前缀：UTF-16 编码（C23 起）
- `U` 前缀：UTF-32 编码（C23 起）

这些编码用于将执行字符集中的字符映射到对应的多字节字符常量或字符串字面量。

---

## 5. 实践举例

### 5.1 判断字符是否为字母或数字

```c
#include <stdio.h>
#include <ctype.h>
int main(void) {
	char c = 'A';
	if (isalpha(c)) printf("字母\n");
	if (isdigit(c)) printf("数字\n");
	return 0;
}
```

### 5.2 字符编码与字符串

```c
#include <stdio.h>
int main(void) {
	char s[] = "Hello, 世界";
	printf("%s\n", s); // 可能因编码不同而输出不同
	return 0;
}
```

---

## 6. 参考资料

- ISO/IEC 9899:2018 (C18) - Programming languages — C
- cppreference.com
