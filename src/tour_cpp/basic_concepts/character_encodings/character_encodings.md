## å­—ç¬¦é›†ä¸ç¼–ç - C++è¯­è¨€åŸºç¡€æ¦‚å¿µ

æœ¬é¡µæè¿°C++æ ‡å‡†å®šä¹‰çš„å¤šä¸ªå­—ç¬¦é›†ã€‚

```text
ç¿»è¯‘å­—ç¬¦é›†- ç¿»è¯‘å­—ç¬¦é›†åŒ…å«ä»¥ä¸‹å…ƒç´ ï¼š
1. æ¯ä¸ªè¢«åˆ†é…äº†Unicodeç ç‚¹çš„æŠ½è±¡å­—ç¬¦
2. æ¯ä¸ªæœªè¢«åˆ†é…æŠ½è±¡å­—ç¬¦çš„Unicodeæ ‡é‡å€¼å¯¹åº”çš„ç‹¬ç‰¹å­—ç¬¦
ç¿»è¯‘å­—ç¬¦é›†æ˜¯åŸºæœ¬å­—ç¬¦é›†å’ŒåŸºæœ¬å­—é¢å­—ç¬¦é›†çš„è¶…é›†ï¼ˆè‡ªC++23èµ·ï¼‰

åŸºæœ¬å­—ç¬¦é›†- åŸºæœ¬å­—ç¬¦é›†åŒ…å«ä»¥ä¸‹96ä¸ªå­—ç¬¦ï¼ˆC++26å‰ï¼‰/99ä¸ªå­—ç¬¦ï¼ˆC++26èµ·ï¼‰ï¼š
ä»£ç ç‚¹        å­—ç¬¦åç§°                å­—å½¢
U+0009        å­—ç¬¦åˆ¶è¡¨ç¬¦    
U+000B        è¡Œåˆ¶è¡¨ç¬¦    
U+000C        æ¢é¡µç¬¦(FF)    
U+0020        ç©ºæ ¼    
U+000A        æ¢è¡Œç¬¦(LF)    æ–°è¡Œ
U+0021        æ„Ÿå¹å·                !
U+0022        å¼•å·                  "
U+0023        æ•°å­—ç¬¦å·              #
U+0025        ç™¾åˆ†å·                %
U+0026        å’Œå·                  &
U+0027        æ’‡å·                  '
U+0028        å·¦åœ†æ‹¬å·              (
U+0029        å³åœ†æ‹¬å·              )
U+002A        æ˜Ÿå·                  *
U+002B        åŠ å·                  +
U+002C        é€—å·                  ,
U+002D        è¿å­—ç¬¦                -
U+002E        å¥å·                  .
U+002F        æ–œçº¿                  /
U+0030..U+0039 æ•°å­—é›¶åˆ°ä¹           0 1 2 3 4 5 6 7 8 9
U+003A        å†’å·                  :
U+003B        åˆ†å·                  ;
U+003C        å°äºå·                <
U+003D        ç­‰å·                  =
U+003E        å¤§äºå·                >
U+003F        é—®å·                  ?
U+0041..U+005A æ‹‰ä¸å¤§å†™å­—æ¯Aåˆ°Z     A B C D E F G H I J K L M N O P Q R S T U V W X Y Z
U+005B        å·¦æ–¹æ‹¬å·              [
U+005C        åæ–œçº¿                \
U+005D        å³æ–¹æ‹¬å·              ]
U+005E        æŠ‘æ‰¬ç¬¦                ^
U+005F        ä¸‹åˆ’çº¿                _
U+0061..U+007A æ‹‰ä¸å°å†™å­—æ¯aåˆ°z     a b c d e f g h i j k l m n o p q r s t u v w x y z
U+007B        å·¦èŠ±æ‹¬å·              {
U+007C        ç«–çº¿                  |
U+007D        å³èŠ±æ‹¬å·              }
U+007E        æ³¢æµªå·                ~
è‡ªC++26èµ·ï¼ŒåŸºæœ¬å­—ç¬¦é›†æ–°å¢ä»¥ä¸‹å­—ç¬¦ï¼š
ä»£ç ç‚¹        å­—ç¬¦åç§°        å­—å½¢
U+0024        ç¾å…ƒç¬¦å·        $
U+0040        å•†ç”¨atç¬¦å·      @
U+0060        é‡éŸ³ç¬¦å·        `

åŸºæœ¬å­—é¢å­—ç¬¦é›†- åŸºæœ¬å­—é¢å­—ç¬¦é›†åŒ…å«åŸºæœ¬å­—ç¬¦é›†çš„æ‰€æœ‰å­—ç¬¦ï¼Œä»¥åŠä»¥ä¸‹æ§åˆ¶å­—ç¬¦ï¼š
ä»£ç ç‚¹        å­—ç¬¦
U+0000        ç©ºå­—ç¬¦
U+0007        å“é“ƒ
U+0008        é€€æ ¼
U+000D        å›è½¦(CR)

æ‰§è¡Œå­—ç¬¦é›†
æ‰§è¡Œå­—ç¬¦é›†å’Œæ‰§è¡Œå®½å­—ç¬¦é›†æ˜¯åŸºæœ¬å­—é¢å­—ç¬¦é›†çš„è¶…é›†ã€‚æ‰§è¡Œå­—ç¬¦é›†çš„ç¼–ç å’Œé™„åŠ å…ƒç´ é›†åˆï¼ˆå¦‚æœ‰ï¼‰ä¸æœ¬åœ°ç¯å¢ƒç›¸å…³ã€‚æ‰§è¡Œå®½å­—ç¬¦é›†çš„æ¯ä¸ªå…ƒç´ å¿…é¡»å¯è¡¨ç¤ºä¸ºç‹¬ç‰¹çš„wchar_tä»£ç å•å…ƒã€‚

ä»£ç å•å…ƒä¸å­—é¢ç¼–ç 
ä»£ç å•å…ƒæ˜¯å­—ç¬¦ç±»å‹çš„æ•´æ•°å€¼ã€‚é™¤å¤šå­—ç¬¦æˆ–ä¸å¯ç¼–ç å­—ç¬¦å¤–çš„å­—ç¬¦å­—é¢é‡ï¼Œæˆ–å­—ç¬¦ä¸²å­—é¢é‡ä¸­çš„å­—ç¬¦ï¼ŒæŒ‰ç¼–ç å‰ç¼€ç¡®å®šä¸ºä¸€ä¸ªæˆ–å¤šä¸ªä»£ç å•å…ƒåºåˆ—ï¼Œç§°ä¸ºç›¸åº”çš„å­—é¢ç¼–ç ã€‚

å­—é¢ç¼–ç æˆ–æ‰§è¡Œå­—ç¬¦é›†çš„æœ¬åœ°ç¯å¢ƒç‰¹å®šç¼–ç å°†åŸºæœ¬å­—é¢å­—ç¬¦é›†çš„æ¯ä¸ªå…ƒç´ ç¼–ç ä¸ºå…·æœ‰éè´Ÿå€¼çš„å•ä¸ªä»£ç å•å…ƒï¼Œä¸”ä¸å…¶ä»–å…ƒç´ çš„ä»£ç å•å…ƒå€¼ä¸åŒã€‚ä¸åœ¨åŸºæœ¬å­—é¢å­—ç¬¦é›†ä¸­çš„å­—ç¬¦å¯ä»¥ç”¨å¤šä¸ªä»£ç å•å…ƒç¼–ç ï¼›æ­¤ç±»ä»£ç å•å…ƒçš„å€¼å¯èƒ½ä¸åŸºæœ¬å­—é¢å­—ç¬¦é›†å…ƒç´ çš„ä»£ç å•å…ƒå€¼ç›¸åŒã€‚æ‰§è¡Œå­—ç¬¦é›†çš„ç¼–ç å¯èƒ½ä¸ä»»ä½•å­—é¢ç¼–ç æ— å…³ã€‚

æ™®é€šå­—é¢ç¼–ç åº”ç”¨äºæ™®é€šå­—ç¬¦æˆ–å­—ç¬¦ä¸²å­—é¢é‡ã€‚å®½å­—é¢ç¼–ç åº”ç”¨äºå®½å­—ç¬¦æˆ–å­—ç¬¦ä¸²å­—é¢é‡ã€‚

U+0000ç©ºå­—ç¬¦ç¼–ç ä¸ºå€¼0ã€‚ç¿»è¯‘å­—ç¬¦é›†çš„å…¶ä»–å…ƒç´ ä¸ä»¥å€¼ä¸º0çš„ä»£ç å•å…ƒç¼–ç ã€‚æ•°å­—0(U+0030)ä¹‹åçš„æ¯ä¸ªåè¿›åˆ¶æ•°å­—å­—ç¬¦çš„ä»£ç å•å…ƒå€¼åº”æ¯”å‰ä¸€ä¸ªæ•°å­—å¤§1ã€‚æ™®é€šå’Œå®½å­—é¢ç¼–ç çš„å…¶ä»–æ–¹é¢ç”±å®ç°å®šä¹‰ã€‚

å¯¹äºUTF-8ã€UTF-16æˆ–UTF-32å­—é¢é‡ï¼Œç¿»è¯‘å­—ç¬¦é›†æ¯ä¸ªå­—ç¬¦å¯¹åº”çš„UCSæ ‡é‡å€¼æŒ‰ISO/IEC 10646å¯¹ç›¸åº”UCSç¼–ç å½¢å¼çš„è§„å®šè¿›è¡Œç¼–ç ã€‚

æ³¨æ„
C++23é€šè¿‡P2314R4æ›´æ”¹äº†æŸäº›å­—ç¬¦é›†çš„æ ‡å‡†åç§°ï¼š
æ–°åç§°                æ—§åç§°
åŸºæœ¬å­—ç¬¦é›†            åŸºæœ¬æºå­—ç¬¦é›†
åŸºæœ¬å­—é¢å­—ç¬¦é›†        åŸºæœ¬æ‰§è¡Œå­—ç¬¦é›†ã€åŸºæœ¬æ‰§è¡Œå®½å­—ç¬¦é›†

åœ¨ç¿»è¯‘é˜¶æ®µ1ä¸­ï¼Œä»æºæ–‡ä»¶å­—ç¬¦ï¼ˆUTF-8æºæ–‡ä»¶é™¤å¤–ï¼Œè‡ªC++23èµ·ï¼‰åˆ°åŸºæœ¬å­—ç¬¦é›†ï¼ˆC++23å‰ï¼‰/ç¿»è¯‘å­—ç¬¦é›†ï¼ˆC++23èµ·ï¼‰çš„æ˜ å°„ç”±å®ç°å®šä¹‰ï¼Œå› æ­¤è¦æ±‚å®ç°æ–‡æ¡£è¯´æ˜åŸºæœ¬æºå­—ç¬¦åœ¨æºæ–‡ä»¶ä¸­çš„è¡¨ç¤ºæ–¹å¼ã€‚

ç¼ºé™·æŠ¥å‘Š
ä»¥ä¸‹è¡Œä¸ºå˜æ›´ç¼ºé™·æŠ¥å‘Šè¢«è¿½æº¯åº”ç”¨äºå…ˆå‰å‘å¸ƒçš„C++æ ‡å‡†ï¼š
DR     åº”ç”¨äº     å‘å¸ƒæ—¶çš„è¡Œä¸º                 çº æ­£åçš„è¡Œä¸º
CWG 788 C++98     æ‰§è¡Œå­—ç¬¦é›†çš„æˆå‘˜å€¼ç”±å®ç°å®šä¹‰ï¼Œä½†ä¸ä¸æœ¬åœ°ç¯å¢ƒç›¸å…³  æ”¹ä¸ºä¸æœ¬åœ°ç¯å¢ƒç›¸å…³
CWG 1796 C++98    åŸºæœ¬æ‰§è¡Œï¼ˆå®½ï¼‰å­—ç¬¦é›†ä¸­çš„ç©ºï¼ˆå®½ï¼‰å­—ç¬¦è¡¨ç¤ºæ‰€æœ‰ä½ä¸ºé›¶  ä»…è¦æ±‚å€¼ä¸ºé›¶
```

---

### C++ å­—ç¬¦é›†ä¸ç¼–ç æ·±åº¦è§£æ

#### 1. **ç¿»è¯‘å­—ç¬¦é›† (Translation Character Set)**

```cpp
// C++23 èµ·ï¼Œæºæ–‡ä»¶å­—ç¬¦ç›´æ¥æ˜ å°„åˆ°ç¿»è¯‘å­—ç¬¦é›†
char32_t unicode_char = U'ğŸ˜Š'; // ç›´æ¥ä½¿ç”¨ Unicode æ ‡é‡å€¼
```
- **å®šä¹‰**ï¼šç¼–è¯‘å™¨å†…éƒ¨ä½¿ç”¨çš„ç»Ÿä¸€å­—ç¬¦è¡¨ç¤º
- **ç»„æˆ**ï¼š
  - æ‰€æœ‰ Unicode ç ç‚¹ï¼ˆU+0000 - U+10FFFFï¼‰
  - æœªåˆ†é…ç ç‚¹çš„ç‹¬ç‰¹å­—ç¬¦ï¼ˆä¿ç•™ä½ç½®ï¼‰
- **å…³é”®ç‰¹æ€§**ï¼š
  - **è¶…é›†å…³ç³»**ï¼šåŒ…å«åŸºæœ¬å­—ç¬¦é›†å’ŒåŸºæœ¬å­—é¢å­—ç¬¦é›†
  - **å¤„ç†é˜¶æ®µ**ï¼šåœ¨ç¿»è¯‘é˜¶æ®µ1æ‰§è¡Œæ˜ å°„
  - **æºæ–‡ä»¶å¤„ç†**ï¼š
    ```mermaid
    graph LR
    A[æºæ–‡ä»¶] --> B{UTF-8?}
    B -- æ˜¯ --> C[ç›´æ¥æ˜ å°„]
    B -- å¦ --> D[å®ç°å®šä¹‰æ˜ å°„]
    ```

#### 2. **åŸºæœ¬å­—ç¬¦é›† (Basic Character Set)**

```cpp
// C++26 æ–°å¢å­—ç¬¦ç¤ºä¾‹
std::string email = "user@host"; // @ (U+0040)
std::string price = "$100";      // $ (U+0024)
std::string template_param = "T`"; // ` (U+0060)
```

- **æ ¸å¿ƒç»„æˆ**ï¼š
  | **ç±»åˆ«**       | **å­—ç¬¦æ•°** | **ç¤ºä¾‹**                     | **C++26 å˜åŒ–**          |
  |----------------|------------|------------------------------|-------------------------|
  | æ§åˆ¶å­—ç¬¦       | 5          | `\t` `\v` `\f` ` ` `\n`     | æ— å˜åŒ–                  |
  | æ ‡ç‚¹ç¬¦å·       | 30         | `!` `"` `#` `%` `&` `'` ç­‰  | æ–°å¢ `$` `@` `` ` ``    |
  | æ•°å­—           | 10         | `0-9`                        | æ— å˜åŒ–                  |
  | å­—æ¯           | 52         | `A-Z` `a-z`                  | æ— å˜åŒ–                  |
  | å…¶ä»–ç¬¦å·       | 9          | `[\]^_{|}~`                  | æ— å˜åŒ–                  |
  | **æ€»è®¡**       | **99**     |                              | ä» C++26 å‰çš„ 96 å¢åŠ    |

- **é‡è¦æ§åˆ¶ç¬¦**ï¼š
  | **ä»£ç ç‚¹** | **åç§°**   | **C++ è¡¨ç¤º** | **åŠŸèƒ½**               |
  |------------|------------|--------------|------------------------|
  | U+0009     | åˆ¶è¡¨ç¬¦     | `\t`         | æ°´å¹³å¯¹é½               |
  | U+000B     | è¡Œåˆ¶è¡¨ç¬¦   | `\v`         | å‚ç›´å¯¹é½ï¼ˆå°‘ç”¨ï¼‰       |
  | U+000C     | æ¢é¡µç¬¦     | `\f`         | æ‰“å°æœºæ¢é¡µ             |
  | U+0020     | ç©ºæ ¼       | ` `          | å•è¯åˆ†éš”               |
  | U+000A     | æ¢è¡Œç¬¦     | `\n`         | è¡Œç»“æŸæ ‡å¿—             |

#### 3. **åŸºæœ¬å­—é¢å­—ç¬¦é›† (Basic Literal Character Set)**

```cpp
char null_char = '\0'; // U+0000
std::cout << "Alert\a"; // BEL (U+0007)
std::string backspace = "Back\bSpace"; // BS (U+0008)
```
- **æ‰©å±•æ§åˆ¶ç¬¦**ï¼š
  | **ä»£ç ç‚¹** | **å­—ç¬¦** | **åŠŸèƒ½**               | **C++ è½¬ä¹‰** |
  |------------|----------|------------------------|--------------|
  | U+0000     | NUL      | å­—ç¬¦ä¸²ç»ˆæ­¢ç¬¦           | `\0`         |
  | U+0007     | BEL      | ç»ˆç«¯å“é“ƒ               | `\a`         |
  | U+0008     | BS       | å…‰æ ‡å·¦ç§»               | `\b`         |
  | U+000D     | CR       | å›è½¦                   | `\r`         |

- **ç¼–ç è¦æ±‚**ï¼š
  - æ‰€æœ‰å­—ç¬¦å¿…é¡»æœ‰å”¯ä¸€éè´Ÿæ•´æ•°å€¼
  - æ•°å­—è¿ç»­ï¼š`'1' - '0' == 1`
  - ç©ºå­—ç¬¦å€¼ä¸º 0ï¼ˆCWG 1796 ä¿®æ­£ï¼‰

#### 4. **æ‰§è¡Œå­—ç¬¦é›† (Execution Character Set)**

```cpp
// ç¯å¢ƒç›¸å…³ç¼–ç ç¤ºä¾‹
setlocale(LC_ALL, "ja_JP.UTF-8");
std::cout << "æ—¥æœ¬èª"; // æ‰§è¡Œå­—ç¬¦é›†ç¼–ç ä¾èµ–ç¯å¢ƒ
```
- **å…³é”®ç‰¹æ€§**ï¼š
  - **è¶…é›†**ï¼šåŒ…å«åŸºæœ¬å­—é¢å­—ç¬¦é›†
  - **æœ¬åœ°ç¯å¢ƒç›¸å…³**ï¼š
    ```mermaid
    graph TB
    A[æ‰§è¡Œå­—ç¬¦é›†] --> B[ASCII ç¯å¢ƒ]
    A --> C[Shift_JIS ç¯å¢ƒ]
    A --> D[GBK ç¯å¢ƒ]
    B --> E[å•å­—èŠ‚ç¼–ç ]
    C --> F[å¤šå­—èŠ‚ç¼–ç ]
    D --> G[æ··åˆç¼–ç ]
    ```
  - **å®½å­—ç¬¦é›†è¦æ±‚**ï¼š
    - æ¯ä¸ªå­—ç¬¦æœ‰å”¯ä¸€ `wchar_t` è¡¨ç¤º
    - å¤§å°ç”±å®ç°å®šä¹‰ï¼ˆWindows: 2 å­—èŠ‚ï¼ŒLinux: 4 å­—èŠ‚ï¼‰

#### 5. **ä»£ç å•å…ƒä¸å­—é¢ç¼–ç **

```cpp
// ä¸åŒå‰ç¼€çš„ç¼–ç ç¤ºä¾‹
char8_t utf8_char = u8'Î±';    // 2 å­—èŠ‚ä»£ç å•å…ƒåºåˆ—
char16_t utf16_char = u'Î²';   // 1 ä¸ª char16_t ä»£ç å•å…ƒ
char32_t utf32_char = U'Î³';   // 1 ä¸ª char32_t ä»£ç å•å…ƒ
wchar_t wide_char = L'Î´';     // å®ç°å®šä¹‰
```
- **ç¼–ç è§„åˆ™**ï¼š
  | **å‰ç¼€** | **ç¼–ç ç±»å‹**       | **æ ‡å‡†**         | **å­—ç¬¦ç±»å‹** | **ä»£ç å•å…ƒå¤§å°** |
  |----------|--------------------|------------------|--------------|------------------|
  | æ—        | æ™®é€šå­—é¢ç¼–ç        | å®ç°å®šä¹‰         | `char`       | 1 å­—èŠ‚           |
  | `L`      | å®½å­—é¢ç¼–ç          | å®ç°å®šä¹‰         | `wchar_t`    | å®ç°å®šä¹‰         |
  | `u8`     | UTF-8              | ISO/IEC 10646    | `char8_t`    | 1 å­—èŠ‚           |
  | `u`      | UTF-16 (C++23 èµ·)  | ISO/IEC 10646    | `char16_t`   | 2 å­—èŠ‚           |
  | `U`      | UTF-32 (C++23 èµ·)  | ISO/IEC 10646    | `char32_t`   | 4 å­—èŠ‚           |

- **æ ¸å¿ƒçº¦æŸ**ï¼š
  - U+0000 å¿…é¡»ç¼–ç ä¸º 0
  - ç¦æ­¢ä½¿ç”¨ 0 å€¼ç¼–ç å…¶ä»–å­—ç¬¦
  - æ•°å­—å¿…é¡»è¿ç»­ç¼–ç 

#### 6. **å­—ç¬¦é›†æ¼”è¿›ä¸æ ‡å‡†å˜æ›´**

```cpp
#if __cplusplus >= 202302L
// C++26 ä»£ç 
constexpr bool has_new_chars = 
    ('$' == u'$') && ('@' == u'@') && ('`' == u'`');
#endif
```

- **æœ¯è¯­å˜æ›´ (C++23)**ï¼š
  | **æ–°æœ¯è¯­**         | **æ—§æœ¯è¯­**             |
  |--------------------|------------------------|
  | åŸºæœ¬å­—ç¬¦é›†         | åŸºæœ¬æºå­—ç¬¦é›†           |
  | åŸºæœ¬å­—é¢å­—ç¬¦é›†     | åŸºæœ¬æ‰§è¡Œå­—ç¬¦é›†         |
  |                    | åŸºæœ¬æ‰§è¡Œå®½å­—ç¬¦é›†       |

- **C++26 æ–°å¢å­—ç¬¦**ï¼š
  | **å­—ç¬¦** | **ä»£ç ç‚¹** | **åº”ç”¨åœºæ™¯**               |
  |----------|------------|----------------------------|
  | $        | U+0024     | æ¨¡æ¿å‚æ•°/å˜é‡å (`T$`)     |
  | @        | U+0040     | ç”µå­é‚®ä»¶åœ°å€ (`user@host`) |
  | `        | U+0060     | æ¨¡æ¿è¯­æ³• (`vector<T`>`)    |

#### 7. **ç¼ºé™·æŠ¥å‘Šè§£æ**
- **CWG 788**ï¼š
  ```cpp
  // ä¿®æ­£å‰ï¼šæ‰§è¡Œå­—ç¬¦é›†ç¼–ç å®Œå…¨å®ç°å®šä¹‰
  // ä¿®æ­£åï¼šæ‰§è¡Œå­—ç¬¦é›†ç¼–ç ä¸æœ¬åœ°ç¯å¢ƒç›¸å…³
  std::setlocale(LC_CTYPE, "en_US.UTF-8");
  char euro_sign = 'â‚¬'; // ç¼–ç ä¾èµ–å½“å‰åŒºåŸŸè®¾ç½®
  ```

- **CWG 1796**ï¼š
  ```cpp
  // ä¿®æ­£å‰ï¼šç©ºå­—ç¬¦è¦æ±‚æ‰€æœ‰ä½ä¸º0
  // ä¿®æ­£åï¼šç©ºå­—ç¬¦åªéœ€æ•´æ•°å€¼ä¸º0
  char null_char = '\0';
  static_assert(null_char == 0, "Value must be zero");
  // ä¸å†è¦æ±‚ä½æ¨¡å¼å…¨é›¶ï¼ˆé€‚ç”¨äºéäºŒè¿›åˆ¶è¡¥ç ç³»ç»Ÿï¼‰
  ```

#### 8. **å¤šå­—èŠ‚å­—ç¬¦å¤„ç†**

```cpp
// å¤šå­—èŠ‚å­—ç¬¦ä¸²æ“ä½œ
std::string mb_str = "æ—¥æœ¬èª";
size_t char_count = std::mblen(mb_str.c_str(), MB_CUR_MAX);

// å®½å­—ç¬¦è½¬æ¢
std::wstring_convert<std::codecvt_utf8<wchar_t>> converter;
std::wstring wide_str = converter.from_bytes(mb_str);
```

#### 9. **Unicode æ ‡è¯†ç¬¦æ”¯æŒ (C++11 èµ·)**

```cpp
int rÃ©sumÃ© = 1;      // å¸¦é‡éŸ³å­—ç¬¦
double Î” = 1.618;   // å¸Œè…Šå­—æ¯
class ã‚¯ãƒ©ã‚¹ {};     // æ—¥æ–‡ç‰‡å‡å
```

#### 10. **è·¨å¹³å°ç¼–ç æœ€ä½³å®è·µ**

```cpp
#include <string>
#include <codecvt>
#include <locale>

std::string to_utf8(const std::wstring& wide_str) {
    std::wstring_convert<std::codecvt_utf8<wchar_t>> converter;
    return converter.to_bytes(wide_str);
}

std::wstring from_utf8(const std::string& utf8_str) {
    std::wstring_convert<std::codecvt_utf8<wchar_t>> converter;
    return converter.from_bytes(utf8_str);
}

void safe_print(const std::string& str) {
    // ç¡®ä¿ä½¿ç”¨UTF-8æ§åˆ¶å°
    #ifdef _WIN32
        SetConsoleOutputCP(CP_UTF8);
    #endif
    std::cout << str;
}
```

#### 11. **ç¼–è¯‘æ—¶å­—ç¬¦å¤„ç† (C++17 èµ·)**

```cpp
constexpr bool is_basic_char(char32_t c) {
    // æ£€æŸ¥æ˜¯å¦å±äºåŸºæœ¬å­—ç¬¦é›†
    return (c >= U'\t' && c <= U'~') || 
           (c >= U'$' && c <= U'`'); // C++26æ‰©å±•
}

static_assert(is_basic_char(U'A'));
static_assert(!is_basic_char(U'â‚¬'));
```

> C++ çš„å­—ç¬¦å¤„ç†æ¶æ„ç»å†äº†ä»å®ç°å®šä¹‰åˆ°æ ‡å‡†åŒ–çš„æ¼”è¿›ã€‚C++23 ç»Ÿä¸€äº†å­—ç¬¦é›†æœ¯è¯­å¹¶å¼ºåŒ–äº†ç¿»è¯‘å­—ç¬¦é›†çš„ä½œç”¨ï¼ŒC++26 åˆ™é€šè¿‡æ·»åŠ  `$`ã€`@` å’Œ `` ` `` ä¸‰ä¸ªå…³é”®å­—ç¬¦ä½¿åŸºæœ¬å­—ç¬¦é›†æ›´è´´åˆç°ä»£ç¼–ç¨‹éœ€æ±‚ã€‚ç†è§£æ‰§è¡Œå­—ç¬¦é›†çš„ç¯å¢ƒç›¸å…³æ€§ã€ä¸åŒå­—é¢ç¼–ç çš„æ˜ å°„è§„åˆ™ï¼Œä»¥åŠç©ºå­—ç¬¦çš„ç²¾ç¡®è¦æ±‚ï¼ˆCWG 1796ï¼‰ï¼Œå¯¹å¼€å‘è·¨å¹³å°å›½é™…åŒ–åº”ç”¨è‡³å…³é‡è¦ã€‚ç°ä»£ C++ é€šè¿‡ `char8_t`/`char16_t`/`char32_t` ç±»å‹å’Œæ ‡å‡†è½¬æ¢å·¥å…·ï¼Œä¸º Unicode å¤„ç†æä¾›äº†åšå®åŸºç¡€ã€‚