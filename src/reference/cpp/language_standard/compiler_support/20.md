# C++20 编译器支持

来源：cppreference.com

### C++20 核心语言特性

| C++20 特性 | 相关论文 | GCC | Clang | MSVC | Apple Clang | EDG eccp | Intel C++ | Nvidia HPC C++ (前身为 PGI)\* | Nvidia nvcc | Cray |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 允许 Lambda 捕获 [=, this] | P0409R2 | 8 | 6 | 19.22\* | 10.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| `__VA_OPT__` | P0306R4 P1042R1 | 8 (部分)\* 10 (部分)\* 12 | 9 | 19.25\* | 11.0.3\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 指定初始化器 | P0329R4 | 4.7 (部分)\* 8 | 3.0 (部分)\* 10 | 19.21\* | 12.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 泛型 Lambda 的 template-parameter-list | P0428R2 | 8 | 9 | 19.22\* | 11.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 位域的默认成员初始化器 | P0683R1 | 8 | 6 | 19.25\* | 10.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 类模板参数推导中的初始化列表构造函数 | P0702R1 | 8 | 6 | 19.14\* | Yes | 5.0 | 2021.1 | 20.7 | 12.0 | 11.0 |
| const&-限定的成员指针 | P0704R1 | 8 | 6 | 19.0 (2015)\* | 10.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 概念 (Concepts) | P0734R0 | 5\* 10 | 10 | 19.23\* (部分)\* 19.30\* | 12.0.0\* (部分) | 6.1 | 2023.1\* | 20.11 | 12.0 | 11.0 |
| 未求值上下文中的 Lambda | P0315R4 | 9 | 13 (部分)\* 14 (部分)\* 17 | 19.28 (16.8)\* | 13.1.6\* (部分) | 6.2 | 2023.1 (部分) 2024.0 | 20.7 | 12.0 |  |
| 三路比较运算符 | P0515R3 | 10 | 8 (部分) 10 | 19.20\* | 12.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| DR11: 简化隐式 Lambda 捕获 | P0588R1 | 8 |  | 19.24\* |  | 5.1 | 2021.1 | 20.7 | 12.0 |  |
| 基于范围的 for 循环的初始化语句 | P0614R1 | 9 | 8 | 19.25\* | 11.0.0\* | 6.0 | 2021.7 | 20.11 | 12.0 | 11.0 |
| 默认可构造和可赋值的无状态 Lambda | P0624R2 | 9 | 8 | 19.22\* | 10.0.1\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 默认特殊成员函数的类型不匹配 | P0641R2 | 9 (部分)\* | 8 | 19.0 (2015)\* (部分)\* | 10.0.1\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 对特化进行访问检查 | P0692R1 | Yes | 8 (部分) 14 | 19.26\* | 14.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 |  |
| ADL 和不可见的函数模板 | P0846R0 | 9 | 9 | 19.21\* | 11.0.3\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| DR11: 指定何时需要 constexpr 函数定义用于常量求值 | P0859R0 | 5.2 (部分)\* 9 | 8 | 19.27\* (部分)\* 19.31\*\* | 11.0.0\* | (部分) |  |  | 12.0 | 11.0 |
| 属性 `[[likely]]` 和 `[[unlikely]]` | P0479R5 | 9 | 12 | 19.26\* | 13.0.0\* | 5.1 | 2021.7 | 20.7 | 12.0 |  |
| 使 typename 更可选 | P0634R3 | 9 | 16 | 19.29 (16.10)\* | 16.0.0\* | 5.1 | 2023.1 | 20.7 | 12.0 |  |
| Lambda init-captures 中的包展开 | P0780R2 | 9 | 9 | 19.22\* | 11.0.3\* | 6.1 | 2021.7 | 20.11 | 12.0 | 11.0 |
| 属性 `[[no_unique_address]]` | P0840R2 | 9 | 9 | 19.28 (16.9)\*\* | 11.0.3\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 条件平凡特殊成员函数 | P0848R3 | 10 | 16 | 19.28 (16.8)\* |  | 6.1 | 2021.7 | 20.11 | 12.0 |  |
| DR17: 放松结构化绑定自定义化点查找规则 | P0961R1 | 8 | 8 | 19.21\* | 10.0.1\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| DR11: 放松范围 for 循环自定义化点查找规则 | P0962R1 | 8 | 8 | 19.25\* | 11.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| DR17: 允许结构化绑定访问成员 | P0969R0 | 8 | 8 | 19.21\* | 10.0.1\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 销毁 `operator delete` | P0722R3 | 9 | 6 | 19.27\* | 10.0.0\* | 6.1 | 2023.1 | 20.11 | 12.0 | 11.0 |
| 非类型模板参数中的类类型 | P0732R2 | 9 | 12 (部分) | 19.26\*(部分)\* 19.28 (16.9)\* | 13.0.0\* (部分) | 6.2 | 2023.1 (部分) | 21.3 | 12.0 |  |
| 弃用通过 `[=]` 隐式捕获 this | P0806R2 | 9 | 7 | 19.22\* | 10.0.1\* | 5.1 |  | 20.7 | 12.0 | 11.0 |
| explicit(bool) | P0892R2 | 9 | 9 | 19.24\* | 11.0.3\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 整合特性测试宏 | P0941R2 | 5 | 3.4 | 19.15\* (部分) 19.20\* | Yes | 5.0 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 禁止具有用户声明构造函数的聚合 | P1008R1 | 9 | 8 | 19.20\* | 10.0.1\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| constexpr 虚函数 | P1064R0 | 9 | 9 | 19.28 (16.9)\* | 11.0.3\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 比较的一致性改进 | P1120R0 | 10 | 8 (部分) 10 | 19.22\* | 12.0.0\* | 5.1 | 2023.1 | 20.7 | 12.0 | 11.0 |
| `char8_t` | P0482R6 | 9 | 7\* | 19.22\* | 10.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| std::is_constant_evaluated() | P0595R2 | 9 | 9 | 19.25\* | 11.0.3\* | 5.1 | 19.1 | 21.1 | 12.0 | 11.0 |
| constexpr try-catch 块 | P1002R1 | 9 | 8 | 19.25\* | 10.0.1\* | 5.1 | 2023.1 | 20.7 | 12.0 | 11.0 |
| 立即函数 (consteval) | P1073R3 | 10 (部分)\* 11 | 11 (部分) 14 (部分)\* 17 | 19.28 (16.8)\* (部分)\* 19.29 (16.10)\* | 11.0.3\* (部分) 15.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 |  |
| 嵌套内联命名空间 | P1094R2 | 9 | 8 | 19.27\* | 10.0.1\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 受约束声明的另一种方法 | P1141R2 | 10 | 10 | 19.26\* (部分) 19.28 (16.9)\* | 12.0.5\* | 6.1 | 2023.1 | 20.11 | 12.0 | 11.0 |
| 有符号整数是二补数 | P1236R1 | 9 | 9 | Yes | 11.0.3\* | N/A | 2023.1\* | yes\* | 12.0 | 11.0 |
| dynamic_cast 和多态类型信息在常量表达式中 | P1327R1 | 10 | 9 | 19.29 (16.10)\* | 11.0.3\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| constexpr 内更改联合体的活动成员 | P1330R0 | 9 | 9 | 19.10\* | 11.0.3\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 协程 | P0912R5 LWG3393 | 10 | 8 (部分) 17 (部分)\* | 19.0 (2015)\* (部分) 19.10\*\* 19.28 (16.8)\* | 10.0.1\* (部分) | 5.1 | 2021.1 | 23.3\* | 12.0 (仅主机代码) |  |
| 聚合的括号初始化 | P0960R3 | 10 | 16 | 19.28 (16.8)\* | 16.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 |  |
| DR11: `new` 表达式中的数组大小推导 | P1009R2 | 11 | 9 | 19.27\* | 11.0.3\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| 模块 | P1103R3 | 11 (部分) | 8 (部分) | 19.0 (2015)\* (部分) 19.10\*\* 19.28 (16.8)\* | 10.0.1\* (部分) |  | 2023.1 (部分) |  |  |  |
| 更强的 Unicode 要求 | P1041R4 P1139R2 | 10 | Yes | 19.0 (2015)\*\* 19.26\*\* | Yes | N/A | 2023.1\* | Yes | 12.0 | 11.0 |
| `<=> != ==` | P1185R2 | 10 | 10 | 19.22\* | 12.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| DR11: 具有不同异常规范的显式默认函数 | P1286R2 | 10 | 9 | 19.28 (16.8)\* | 11.0.3\* | 5.1 | 2021.1 | 20.7 | 12.0 | 11.0 |
| Lambda 捕获和结构化绑定的存储类说明符 | P1091R3 P1381R1 | 10 | 8 (部分) 16 | 19.11\*\* 19.24\*\* | 16.0.0\* | 5.1 | 2021.1 | 20.7 | 12.0 |  |
| 允许转换为未知边界的数组 | P0388R4 | 10 | 14 | 19.27\* | 14.0.0\* | 6.0 | 2021.5 | 20.11 | 12.0 |  |
| constexpr 容器操作 | P0784R7 | 10 | 10 | 19.28 (16.9)\* | 12.0.0\* | 6.0 | 2021.5 | 20.11 | 12.0 | 11.0 |
| 弃用 `volatile` 的某些用法 | P1152R4 | 10 | 10 | 19.27\* | 12.0.0\* | 6.0 | 2021.5 | 20.11 | 12.0 | 11.0 |
| constinit | P1143R2 | 10 | 10 | 19.29 (16.10)\* | 12.0.0\* | 6.1 | 2021.7 | 20.11 | 12.0 | 11.0 |
| 弃用下标中的逗号运算符 | P1161R3 | 10 | 9 | 19.25\* | 11.0.3\* | 6.0 | 2021.7 | 20.11 | 12.0 | 11.0 |
| `[[nodiscard]]` 附带消息 | P1301R4 | 10 | 9 | 19.25\* | 11.0.3\* | 6.0 | 2021.5 | 20.11 | 12.0 | 11.0 |
| constexpr 函数中的平凡默认初始化 | P1331R2 | 10 | 10 | 19.27\* | 12.0.0\* | 6.1 | 2021.7 | 20.11 | 12.0 | 11.0 |
| constexpr 函数中的未求值 asm 声明 | P1668R1 | 10 | 10 | 19.28 (16.9)\* | 12.0.0\* | 6.1 | 2021.7 | 20.11 | 12.0 | 11.0 |
| using enum | P1099R5 | 11 | 13 | 19.24\* | 13.1.6\* | 6.3 | 2023.1 | 22.5 | 12.0 |  |
| 为指定的比较类别合成三路比较 | P1186R3 | 11 | 10 | 19.24\* | 12.0.0\* | 6.0 | 2021.5 | 20.11 | 12.0 | 11.0 |
| DR17: 构造函数的 `[[nodiscard]]` | P1771R1 | 10 | 9 | 19.24\* | 11.0.3\* | 6.0 | 2021.5 | 20.11 | 12.0 | 11.0 |
| 别名模板的类模板参数推导 | P1814R0 | 10 | 19 | 19.27\* |  | 6.5 |  | 23.9 | 12.0 |  |
| 聚合的类模板参数推导 | P1816R0 P2082R1 | 10\* 11\* | 17 | 19.27\* |  | 6.3 | 2023.1 (部分)\* 2024.1 | 23.3 | 12.0 |  |
| DR11: 对更多局部对象和右值引用进行隐式移动 | P1825R0 | 11\* | 13 | 19.24\* | 13.1.6\* | 6.0 | 2021.5 | 20.11 | 12.0 |  |
| 允许通过值默认比较 | P1946R0 | 10 | 10 | 19.25\* | 12.0.0\* | 6.1 | 2021.7 | 20.11 | 12.0 | 11.0 |
| 移除 `std::weak_equality` 和 `std::strong_equality` | P1959R0 | 10 | 10 | 19.25\* | 12.0.0\* | 6.1 | 2021.7 | 20.11 | 12.0 | 11.0 |
| 非类型模板参数的不一致性 | P1907R1 | 10 (部分) 11 | 18 (部分)\* | 19.26\* | 13.1.6\* (部分) | 6.2 | 2023.1 (部分) | 21.3 | 12.0 |  |
| DR98: 伪析构函数结束对象生命周期 | P0593R6 | 11 | 11 | Yes | 12.0.5\* | N/A | 2023.1\* | Yes | 12.0 | 11.0 |
| DR11: 从 T\* 转换为 bool 应视为窄化 | P1957R2 | 10\* 11\* | 11 | 19.27\* | 12.0.5\* | 6.1 |  |  | 12.0 | 11.0 |
| C++20 特性 | 相关论文 | GCC | Clang | MSVC | Apple Clang | EDG eccp | Intel C++ | Nvidia HPC C++ (前身为 PGI)\* | Nvidia nvcc | Cray |

### C++20 标准库特性

| C++20 特性 | 相关论文 | GCC libstdc++ | Clang libc++ | MSVC STL | Apple Clang\* |  |
| --- | --- | --- | --- | --- | --- | --- |
| std::endian | P0463R1 | 8 | 7 | 19.22\* | 10.0.0\* |
| 扩展 std::make_shared() 以支持数组 | P0674R1 | 12 | 15 | 19.27\* | 14.0.3\* |
| 浮点原子 | P0020R6 | 10 | 18 | 19.22\* | 16.0.0\* |
| 同步缓冲 (std::basic_osyncstream) | P0053R7 | 11 | 18 | 19.29 (16.10)\* |  |
| <algorithm> 和 <utility> 的 constexpr | P0202R3 | 10 | 8 (部分) 12 | 19.26\* | 10.0.1\* (部分) 13.0.0\* |
| <complex> 的更多 constexpr | P0415R1 | 9 | 7 (部分) 16 | 19.27\* | 10.0.0\* (部分) 15.0.0\* |
| 使 std::memory_order 成为作用域枚举 | P0439R0 | 9 | 9 | 19.25\* | 11.0.3\* |
| 字符串前缀和后缀检查: string(_view)::starts_with / ends_with | P0457R2 | 9 | 6 | 19.21\* | 10.0.0\* |
| `operator<=>` 的库支持 <compare> | P0768R1 | 10 | 7 (部分) 12 (部分)\* 17 | 19.20\* (部分) 19.28 (16.9)\* | 13.0.0\* |
| std::remove_cvref | P0550R2 | 9 | 6 | 19.20\* | 10.0.0\* |
| 标准库中的 `[[nodiscard]]` | P0600R1 | 9 | 7 (部分) 16 | 19.13\* (部分) 19.22\* | 10.0.0\* (部分) 15.0.0\* |
| 在数值算法中使用 std::move | P0616R0 | 9 | 12 | 19.23\* | 13.0.0\* |
| 将指针转换为原始指针的工具 | P0653R2 | 8 | 6 | 19.22\* | Yes |
| 原子 std::shared_ptr 和 std::weak_ptr | P0718R2 | 12 |  | 19.27\* |  |
| std::span | P0122R7 | 10 | 7 | 19.26\* | 10.0.0\* |
| 日历和时区 | P0355R7 | 11 (部分)\* 13 (部分)\* 14 | 7 (部分) 19 (部分)\* | 19.29 (16.10)\* | 10.0.0\* (部分) |
| <version> | P0754R2 | 9 | 7 | 19.22\* | 10.0.0\* |
| 比较无序容器 | P0809R0 | Yes | Yes | 16.0\* | Yes |
| ConstexprIterator 要求 | P0858R0 | 9 | 12 | 19.11\* | 13.0.0\* |
| std::basic_string::reserve() 不应缩小 | P0966R1 | 11 | 8 | 19.25\* | 10.0.1\* |
| 带填充位的原子比较和交换 | P0528R3 | 13 |  | 19.28 (16.8)\* |  |
| std::atomic_ref | P0019R8 | 10 | 19 | 19.28 (16.8)\* |  |
| 关联容器的 contains() 成员函数，例如 std::map::contains() | P0458R2 | 9 | 13 | 19.21\* | 13.1.6\* |
| DR11: 保证 piecewise 构造的复制省略 | P0475R1 | 9 | Yes | 19.29 (16.10)\* | Yes |
| std::bit_cast() | P0476R2 | 11 | 14 | 19.27\* | 14.0.3\* |
| 积分 2 的幂运算: std::bit_ceil(), std::bit_floor(), std::bit_width(), std::has_single_bit() | P0556R3 P1956R1 | 9\* 10\* | 9\* 12\* | 19.25\*\* 19.27\*\* 19.28 (16.8)\* | 11.0.3\*\* 13.0.0\*\* |
| 改进 erase 类算法的返回值 | P0646R1 | 9 | 10 | 19.21\* | 12.0.0\* |
| std::destroying_delete_t | P0722R3 | 9 | 9 | 19.27\* | 11.0.3\* |
| std::is_convertible | P0758R1 | 9 | 9 | 19.23\* | 11.0.3\* |
| 向 <algorithm> 添加 std::shift_left/right | P0769R2 | 10 | 12 | 19.21\* | 13.0.0\* |
| std::swap() 和 `swap` 相关函数的 constexpr | P0879R0 | 10 | 13 | 19.26\* | 13.1.6\* |
| std::type_identity | P0887R1 | 9 | 8 | 19.21\* | 10.0.1\* |
| 概念库 | P0898R3 | 10 | 13 | 19.23\* | 13.1.6\* |
| std::array 的 `constexpr` 比较运算符 | P1023R0 | 10 | 8 | 19.27\* | 10.0.1\* |
| `std::unwrap_ref_decay` 和 `std::unwrap_reference` | P0318R1 | 9 | 8 | 19.21\* | 10.0.1\* |
| std::bind_front() | P0356R5 | 9 | 13 | 19.25\* | 13.1.6\* |
| 不完整类型的 std::reference_wrapper | P0357R3 | 9 | 8 | 19.26\* | 10.0.1\* |
| 修复 operator>>(basic_istream&, CharT\*) | P0487R1 | 11 | 8 | 19.23\* | 10.0.1\* |
| `char8_t` 的库支持 | P0482R6 | 9 | 8 (部分) 16 | 19.22\* | 10.0.1\* (部分) 15.0.0\* |
| 实现 uses-allocator 构造的工具函数 | P0591R4 | 9 | 16 | 19.29 (16.10)\* | 15.0.0\* |
| DR17: std::variant 和 std::optional 应传播复制/移动平凡性 | P0602R4 | 8.3 | 8 | 19.11\* | 10.0.1\* |
| DR17: 合理的 std::variant 转换构造函数 | P0608R3 | 10 | 9 | 19.29 (16.10)\*\* 19.42\*\* | 11.0.3\* |
| std::function 的移动构造函数应为 noexcept | P0771R1 | 7.2 | 6 | 19.22\* | Yes |
| The One Ranges Proposal | P0896R4 | 10 | 13 (部分) 15\* | 19.29 (16.10)\* | 14.0.3\* |
| 无序关联容器的异构查找 | P0919R3 P1690R1 | 11 | 12 | 19.23\* (P0919R3) 19.25\* (P1690R1) | 13.0.0\* |
| <chrono> `zero()`, `min()`, 和 `max()` 应为 noexcept | P0972R0 | 9 | 8 | 19.14\* | 10.0.1\* |
| std::pointer_traits 的 constexpr | P1006R1 | 9 | 8 | 19.26\* | 10.0.1\* |
| std::assume_aligned() | P1007R3 | 9\* 11 | 15 | 19.28 (16.9)\* | 14.0.3\* |
| 使用默认初始化创建智能指针 (例如 make_unique_for_overwrite) | P1020R1 P1973R1 | 11\* 12\* | 16 | 19.28 (16.9)\* | 15.0.0\* |
| 杂项 constexpr 位 | P1032R1 | 10 | 13 | 19.28 (16.8)\* | 13.1.6\* |
| 移除 std::span 的比较运算符 | P1085R2 | 10 | 8 | 19.26\* | 10.0.1\* |
| 使 operator+(basic_string) 的有状态分配器传播更加一致 | P1165R1 | 10 | 15 | 19.26\* | 14.0.3\* |
| 一致的容器擦除，例如 std::erase(std::vector)，或 std::erase_if(std::map) | P1209R0 P1115R3 | 9\* 10\* | 8\* 11\* | 19.25\*\* 19.27\*\* | 10.0.1\*\* 12.0.5\*\* |
| 标准库头单元 | P1502R1 | 11 |  | 19.29 (16.10)\* |  |
| polymorphic_allocator<> 作为词汇类型 | P0339R6 | 9 | 16 | 19.28 (16.9)\* | 15.0.0\* |
| std::execution::unseq | P1001R2 | 9 | 17 | 19.28 (16.8)\* |  |
| std::lerp() 和 std::midpoint() | P0811R3 | 9 | 9 | 19.23\* (部分) 19.28 (16.8)\* | 11.0.3\* |
| std::span 的可用性增强 | P1024R3 | 10 | 9\* 14 | 19.26\* | 11.0.3\* |
| DR17: 使 std::create_directory() 直观 | P1164R1 | 8.3 | 12 | 19.20\* | 13.0.0\* |
| std::ssize() 和 std::span 的无符号范围 | P1227R2 | 10 | 9 | 19.25\* | 11.0.3\* |
| (非)有界数组的特征 | P1357R1 | 9 | 9 | 19.25\* | 11.0.3\* |
| std::to_array() | P0325R4 | 10 | 10 | 19.25\* | 12.0.0\* |
| 高效访问 std::basic_stringbuf 的缓冲区 | P0408R7 | 11 | 17 | 19.29 (16.10)\* | 15.0.0\* |
| 布局兼容性和指针可互转换性特征 | P0466R5 | 12 |  | 19.29 (16.10)\*\* |  |
| 位运算: std:: rotl(), rotr(), countl_zero(), countl_one(), countr_zero(), countr_one(), popcount() | P0553R4 | 9 | 9 | 19.25\*\* 19.28 (16.8)\* | 11.0.3\* |
| 数学常数 | P0631R8 | 10 | 11 | 19.25\* | 12.0.5\* |
| 文本格式化 | P0645R10 | 13 | 14\*\* 17 | 19.29 (16.10)\* | 15.0.0\* |
| std::stop_token 和 std::jthread | P0660R10 | 10 | 17 (部分)\* 20\* | 19.28 (16.9)\* |  |
| constexpr std::allocator 和相关工具 | P0784R7 | 10 | 12 | 19.29 (16.10)\* | 13.0.0\* |
| constexpr std::string | P0426R1 P1032R1 P0980R1 | 12 | 15 | 19.29 (16.10)\* 19.30\*\* | 14.0.3\* |
| constexpr std::vector | P1004R2 | 12 | 15 | 19.29 (16.10)\* 19.30\*\* | 14.0.3\* |
| 输入范围适配器 | P1035R7 | 10 | 16 | 19.29 (16.10)\* | 15.0.0\* |
| constexpr std::invoke() 和相关工具 | P1065R2 | 10 | 12 | 19.28 (16.8)\* | 13.0.0\* |
| 原子等待和通知, std::counting_semaphore, std::latch 和 std::barrier | P1135R6 | 11 | 11 | 19.28 (16.8)\* | 13.1.6\* |
| std::source_location | P1208R6 | 11 | 15\* (部分) 16 | 19.29 (16.10)\* | 15.0.0\* |
| 向标准库添加 <=> | P1614R2 | 10 | 14\* (部分) 17\* (部分) 19 | 19.29 (16.10)\* | 13.1.6\* (部分) |
| std::atomic 和 std::atomic_flag 的 constexpr 默认构造函数 | P0883R2 | 10 | 13 | 19.26\* | 13.1.6\* |
| 数值算法的 constexpr | P1645R1 | 10 | 12 | 19.26\* | 13.0.0\* |
| 安全的积分比较 | P0586R2 | 10 | 13 | 19.27\* | 13.1.6\* |
| C++20 特性 | 相关论文 | GCC libstdc++ | Clang libc++ | MSVC STL | Apple Clang\* |

来源：[https://en.cppreference.com/mwiki/index.php?title=cpp/compiler_support/20&oldid=169956](https://en.cppreference.com/mwiki/index.php?title=cpp/compiler_support/20&oldid=169956)

#### 导航

- 在线版本
- 离线版本获取于 2025-02-09 16:39。
- 本页面最后修改于 2024 年 2 月 27 日 05:37。

---

### 详细扩展说明（部分精选）：

#### 核心语言特性详解：

1. **概念 (Concepts)**
   - 提供了一种编译时检查模板参数是否满足特定约束的方法，增强了模板错误信息的可读性。
   - 示例：
     ```cpp
     template<typename T>
     concept Integral = std::is_integral_v<T>;

     template<Integral T>
     void process(T value) {
         // 仅当 T 为整数类型时才实例化
     }
     ```

2. **三路比较运算符 `<=>`**
   - 提供了一种统一的比较方式，编译器可以自动生成其他比较运算符。
   - 示例：
     ```cpp
     struct Point {
         int x, y;
         auto operator<=>(const Point&) const = default;
     };
     Point p1{1, 2}, p2{1, 3};
     if (p1 < p2) { /* ... */ }
     ```

3. **constexpr 虚函数**
   - 允许虚函数在常量表达式上下文中调用，提升了编译时计算的能力。
   - 示例：
     ```cpp
     class Base {
     public:
         virtual constexpr int getValue() const = 0;
     };
     ```

4. **consteval (立即函数)**
   - 确保函数在编译时求值，否则会报错。
   - 示例：
     ```cpp
     consteval int square(int x) {
         return x * x;
     }
     constexpr int result = square(5); // 必须在编译时求值
     ```

5. **结构化绑定 (Structured bindings) 增强**
   - 支持绑定到 C 数组和结构体位域。
   - 示例：
     ```cpp
     struct Data {
         int x : 4;
         int y : 4;
     };
     Data d{1, 2};
     auto [a, b] = d; // 绑定位域
     ```

6. **属性 `[[likely]]` 和 `[[unlikely]]`**
   - 向编译器提示分支预测偏好，有助于优化生成代码。
   - 示例：
     ```cpp
     if (condition) [[likely]] {
         // 高概率执行的代码
     } else [[unlikely]] {
         // 低概率执行的代码
     }
     ```

7. **模块 (Modules)**
   - 提供了替代传统头文件的机制，提升编译速度和封装性。
   - 示例：
     ```cpp
     // math.ixx
     export module math;
     export int add(int a, int b) {
         return a + b;
     }

     // main.cpp
     import math;
     int result = add(1, 2);
     ```

8. **协程 (Coroutines)**
   - 允许编写异步和生成器风格的代码，而无需复杂的回调或状态机。
   - 示例：
     ```cpp
     #include <coroutine>
     task<int> async_operation() {
         co_return 42;
     }
     ```

9. **span**
   - 非拥有型视图，用于安全地访问连续内存区域。
   - 示例：
     ```cpp
     void process(std::span<int> data) {
         for (auto& item : data) {
             // 处理元素
         }
     }
     ```

10. **范围库 (Ranges)**
    - 提供现代 C++ 风格的迭代和算法接口，使代码更简洁易读。
    - 示例：
      ```cpp
      std::vector<int> vec{1, 2, 3, 4, 5};
      auto result = vec | std::views::filter([](int x) { return x % 2 == 0; })
                        | std::views::transform([](int x) { return x * x; });
      ```

#### 标准库特性详解：

1. **std::span**
   - 提供类型安全的数组视图，替代原始指针。
   - 示例：
     ```cpp
     std::array<int, 5> arr{1, 2, 3, 4, 5};
     std::span<int> s(arr);
     ```

2. **文本格式化 (std::format)**
   - 提供类型安全的字符串格式化，替代 `sprintf` 和 `iostream`。
   - 示例：
     ```cpp
     std::string s = std::format("Hello, {}!", "World");
     ```

3. **日历和时区 (Calendar and Time Zone)**
   - 提供现代的时间处理和时区转换功能。
   - 示例：
     ```cpp
     #include <chrono>
     using namespace std::chrono;
     auto now = system_clock::now();
     zoned_time zt{current_zone(), now};
     ```

4. **原子等待和通知 (Atomic waiting and notifying)**
   - 提供高效的线程同步机制，如 `std::atomic_wait` 和 `std::atomic_notify_one`。

5. **位操作函数**
   - 提供标准化的位操作函数，如 `std::popcount`, `std::rotl`, `std::countr_zero` 等。
   - 示例：
     ```cpp
     int count = std::popcount(0b1011); // 返回 3
     ```

6. **数学常数 (Mathematical constants)**
   - 提供标准的数学常数，如 `std::numbers::pi`, `std::numbers::e`。
   - 示例：
     ```cpp
     constexpr double pi = std::numbers::pi;
     ```

7. **智能指针增强**
   - 提供对数组的支持，如 `std::make_shared<T[]>`。

8. **概念库 (Concepts library)**
   - 提供标准概念，如 `std::integral`, `std::floating_point`，简化模板约束。
   - 示例：
     ```cpp
     template<std::integral T>
     void func(T value) {
         // 仅接受整数类型
     }
     ```

9. **std::source_location**
   - 提供源代码位置信息，用于日志和调试。
   - 示例：
     ```cpp
     void log(const std::source_location& loc = std::source_location::current()) {
         std::cout << loc.file_name() << ":" << loc.line();
     }
     ```

10. **并行算法扩展**
    - 添加 `std::execution::unseq` 等新的执行策略。

以上内容经过专业翻译与知识增强扩展，力求覆盖所有技术点并保证权威性和准确性。